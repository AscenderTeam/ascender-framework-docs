"use strict";(self.webpackChunkascender_framework=self.webpackChunkascender_framework||[]).push([[7601],{8226:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>p,frontMatter:()=>o,metadata:()=>r,toc:()=>c});var i=a(4848),t=a(8453);const o={sidebar_position:1,sidebar_label:"Initializing Database"},s="Initializing Database",r={id:"database/initializing",title:"Initializing Database",description:"Introduction",source:"@site/docs/database/initializing.md",sourceDirName:"database",slug:"/database/initializing",permalink:"/ascender-framework-docs/docs/database/initializing",draft:!1,unlisted:!1,editUrl:"https://github.com/AscenderTeam/ascender-framework-docs/docs/database/initializing.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,sidebar_label:"Initializing Database"},sidebar:"tutorialSidebar",previous:{title:"Database",permalink:"/ascender-framework-docs/docs/category/database"},next:{title:"Configurating Database",permalink:"/ascender-framework-docs/docs/database/configuration"}},d={},c=[{value:"Introduction",id:"introduction",level:3},{value:"Using Tortoise ORM",id:"using-tortoise-orm",level:3},{value:"Using SQLAlchemy",id:"using-sqlalchemy",level:3}];function l(e){const n={admonition:"admonition",code:"code",h1:"h1",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"initializing-database",children:"Initializing Database"}),"\n",(0,i.jsx)(n.h3,{id:"introduction",children:"Introduction"}),"\n",(0,i.jsx)(n.p,{children:"Ascender Framework has it's own integrated Database Engine and rules of how to use it effectively."}),"\n",(0,i.jsx)(n.p,{children:"Currently Ascender Framework supports two types of database engines (ORMs):"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Tortoise ORM"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Tortoise ORM is robust and powerful asynchronous ORM and supports various popular database drivers like: SQLite, MySQL and PostgreSQL"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"SQLAlchemy"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["SQLAlchemy ORM is one of most popular and common ORM's used among various developers, though it doesn't support Active Record how it does Tortoise ORM it can be used easily and properply with ",(0,i.jsx)(n.code,{children:"repositories"})," of controllers. Repositories primarily support SQLAlchemy because of it's design."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsx)(n.p,{children:"At the start of the project, if you need to use database for more large and complicated project, be cautious and choose the ORM wisely, because then after making a project you can't change your option as you need to refactor a lots of code if you decide to change ORM at the half way."})}),"\n",(0,i.jsx)(n.h3,{id:"using-tortoise-orm",children:"Using Tortoise ORM"}),"\n",(0,i.jsxs)(n.p,{children:["To initialize Ascender Framework's Database Engine with Tortoise ORM, you have to use method ",(0,i.jsx)(n.code,{children:"app.use_database(...)"})," in the ",(0,i.jsx)(n.code,{children:"Bootstrap.server_boot_up"})," with ",(0,i.jsx)(n.code,{children:"orm"})," parameter set to TORTOISE in ORMEnum."]}),"\n",(0,i.jsx)(n.p,{children:"Here's how to do it:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from core.application import Application\nfrom core.database.types.orm_enum import ORMEnum\nfrom core.database.engine import DatabaseEngine\nfrom settings import DATABASE_CONNECTION\n\nclass Bootstrap:\n    @staticmethod\n    def server_boot_up(app: Application):\n        app.use_database(lambda e: Bootstrap.database_registry(app, e),\n                         orm=ORMEnum.TORTOISE,\n                         configuration=DATABASE_CONNECTION)\n    \n    @staticmethod\n    def database_registry(app: Application, engine: DatabaseEngine):\n        ...\n"})}),"\n",(0,i.jsxs)(n.p,{children:["How you see we defined ",(0,i.jsx)(n.code,{children:"orm"})," parameter of ",(0,i.jsx)(n.code,{children:"app.use_database"})," method as ",(0,i.jsx)(n.code,{children:"ORMEnum.TORTOISE"})," which sets Ascender Framework's Database Engine to run in TortoiseORM mode."]}),"\n",(0,i.jsx)(n.p,{children:"Additionally you have to define database initialization logic as first parameter asks you."}),"\n",(0,i.jsxs)(n.p,{children:["To do that, in the example we defined method called ",(0,i.jsx)(n.code,{children:"Bootstrap.database_registry"})," which accepts ",(0,i.jsx)(n.code,{children:"DatabaseEngine"})," as second parameter. In this method we define configuration and logic of initializing database how it's made here:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from core.application import Application\nfrom core.database.engine import DatabaseEngine\n\nclass Bootstrap:\n    ...\n    @staticmethod\n    def database_registry(app: Application, engine: DatabaseEngine):\n        engine.run_database()\n"})}),"\n",(0,i.jsxs)(n.p,{children:["As we use TortoiseORM, it's configuration dict is already contains all ",(0,i.jsx)(n.strong,{children:"configuration"})," we need to define, so this method is primarily made for ",(0,i.jsx)(n.strong,{children:"SQLAlchemy"}),". But that doesn't mean you don't have to define it, in the other case if you don't define this method and execute ",(0,i.jsx)(n.code,{children:"engine.run_database()"})," then TortoiseORM won't get initialized."]}),"\n",(0,i.jsx)(n.h3,{id:"using-sqlalchemy",children:"Using SQLAlchemy"}),"\n",(0,i.jsxs)(n.p,{children:["To initialize Ascender Framework's Database Engine with SQLAlchemy ORM, you have to use method ",(0,i.jsx)(n.code,{children:"app.use_database(...)"})," in the ",(0,i.jsx)(n.code,{children:"Bootstrap.server_boot_up"})," with ",(0,i.jsx)(n.code,{children:"orm"})," parameter set to SQLALCHEMY in ORMEnum."]}),"\n",(0,i.jsx)(n.p,{children:"Here's how to do it:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from core.application import Application\nfrom core.database.types.orm_enum import ORMEnum\nfrom core.database.engine import DatabaseEngine\nfrom settings import DATABASE_CONNECTION\n\nclass Bootstrap:\n    @staticmethod\n    def server_boot_up(app: Application):\n        app.use_database(lambda e: Bootstrap.database_registry(app, e),\n                         orm=ORMEnum.SQLALCHEMY,\n                         configuration=DATABASE_CONNECTION)\n    \n    @staticmethod\n    def database_registry(app: Application, engine: DatabaseEngine):\n        ...\n"})}),"\n",(0,i.jsxs)(n.p,{children:["How you see we defined ",(0,i.jsx)(n.code,{children:"orm"})," parameter of ",(0,i.jsx)(n.code,{children:"app.use_database"})," method as ",(0,i.jsx)(n.code,{children:"ORMEnum.SQLALchemy"})," which sets Ascender Framework's Database Engine to run in SQLAlchemy mode."]}),"\n",(0,i.jsx)(n.p,{children:"Additionally you have to define database initialization logic as first parameter asks you."}),"\n",(0,i.jsxs)(n.p,{children:["To do that, in the example we defined method called ",(0,i.jsx)(n.code,{children:"Bootstrap.database_registry"})," which accepts ",(0,i.jsx)(n.code,{children:"DatabaseEngine"})," as second parameter. In this method we define configuration and logic of initializing database how it's made here:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'from core.application import Application\nfrom core.database.engine import DatabaseEngine\n\nclass Bootstrap:\n    ...\n    @staticmethod\n    def database_registry(app: Application, engine: DatabaseEngine):\n        engine.load_entities("entities.*")\n        engine.run_database()\n'})}),"\n",(0,i.jsxs)(n.p,{children:["As we use SQLAlchemy, it's configuration dict is very restricted. So this method is primarily made for ",(0,i.jsx)(n.strong,{children:"SQLAlchemy"}),"."]})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>s,x:()=>r});var i=a(6540);const t={},o=i.createContext(t);function s(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);