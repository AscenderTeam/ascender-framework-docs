"use strict";(self.webpackChunkascender_framework=self.webpackChunkascender_framework||[]).push([[709],{9306:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>a,toc:()=>d});var r=s(4848),i=s(8453);const o={sidebar_position:3,sidebar_label:"Controller Optionals"},l="Controllers - Optionals",a={id:"essentials/optionals",title:"Controllers - Optionals",description:"Nature of optionals",source:"@site/docs/essentials/optionals.md",sourceDirName:"essentials",slug:"/essentials/optionals",permalink:"/ascender-framework-docs/docs/essentials/optionals",draft:!1,unlisted:!1,editUrl:"https://github.com/AscenderTeam/ascender-framework-docs/docs/essentials/optionals.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,sidebar_label:"Controller Optionals"},sidebar:"tutorialSidebar",previous:{title:"Controllers",permalink:"/ascender-framework-docs/docs/essentials/controllers"},next:{title:"Controller DI",permalink:"/ascender-framework-docs/docs/essentials/controllers-di"}},t={},d=[{value:"Nature of optionals",id:"nature-of-optionals",level:3},{value:"Optionals directory structure",id:"optionals-directory-structure",level:3},{value:"Models (DTOs &amp; Responses)",id:"models-dtos--responses",level:3},{value:"Example of defining Data Transfer Object (DTO)",id:"example-of-defining-data-transfer-object-dto",level:4},{value:"Example of defining Response object",id:"example-of-defining-response-object",level:4},{value:"Serializers (For complex objects)",id:"serializers-for-complex-objects",level:3},{value:"Example of Specialized Serializer",id:"example-of-specialized-serializer",level:4}];function c(e){const n={admonition:"admonition",code:"code",em:"em",h1:"h1",h3:"h3",h4:"h4",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"controllers---optionals",children:"Controllers - Optionals"}),"\n",(0,r.jsx)(n.h3,{id:"nature-of-optionals",children:"Nature of optionals"}),"\n",(0,r.jsx)(n.p,{children:"When setting up a controller in the Ascender Framework, there are several optional components that can be included to enhance functionality and maintain a clean separation of concerns. Below is an outline of these optional components:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Models"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Purpose: Define Pydantic objects for request form validation and response models"}),"\n",(0,r.jsx)(n.li,{children:"Types: DTOs (Data Transfer Objects) and Response Models."}),"\n",(0,r.jsxs)(n.li,{children:["Naming Convention: Suffix with ",(0,r.jsx)(n.code,{children:"DTO"})," or ",(0,r.jsx)(n.code,{children:"Response"})," (e.g., ",(0,r.jsx)(n.code,{children:"UserDTO"}),", ",(0,r.jsx)(n.code,{children:"UserResponse"}),")."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Serializers"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Purpose: Serialize complex database entity objects and other complex structures into Pydantic models."}),"\n",(0,r.jsxs)(n.li,{children:["Naming Convention: Suffix with ",(0,r.jsx)(n.code,{children:"Serializer"})," (e.g., ",(0,r.jsx)(n.code,{children:"UserSerializer"}),")."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Services"})," (if many instead of one):","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Purpose: Contains more complex business logic and data handling functions."}),"\n",(0,r.jsxs)(n.li,{children:["Cases: If there is many complex business logics for one controller, several services will be in ",(0,r.jsx)(n.code,{children:"services"})," directory in the controller"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"optionals-directory-structure",children:"Optionals directory structure"}),"\n",(0,r.jsxs)(n.p,{children:["We appreciate and follow SOLID principles and one of them is The ",(0,r.jsx)(n.strong,{children:"single-responsibility principle (SRP)"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["So we structured models and responses into directories, we strongly recommend developers to structure their DTO and Response classes following SRP: ",(0,r.jsx)(n.em,{children:"Single class in a single file"})," even if model is very small."]}),"\n",(0,r.jsx)(n.p,{children:"Here's the example of optional's structure:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\u2514\u2500\u2500 controllers\n    \u2514\u2500\u2500 <controller-name>\n        \u251c\u2500\u2500 endpoints.py\n        \u251c\u2500\u2500 service.py\n        \u251c\u2500\u2500 repository.py\n        \u2514\u2500\u2500 models # One of optionals is Models\n            \u251c\u2500\u2500 __init__.py # For namespacing\n            \u251c\u2500\u2500 dtos\n            \u2502   \u2514\u2500\u2500 user.py\n            \u2514\u2500\u2500 responses\n                \u2514\u2500\u2500 user.py\n"})}),"\n",(0,r.jsxs)(n.p,{children:["This example of optionals ",(0,r.jsx)(n.code,{children:"Models"})," shows us how to properly structure and scale our controller adding additional components to the controller."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"models-dtos--responses",children:"Models (DTOs & Responses)"}),"\n",(0,r.jsxs)(n.p,{children:["Let's dive deeper into ",(0,r.jsx)(n.code,{children:"controller optionals"})," starting with Models.\nUsually, there are two types of Pydantic models:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"DTOs (Data Transfer Objects)"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Data Transfer Objects (DTOs) are responsible for transferring data between components in a defined and specific format. They utilize Pydantic for validation, ensuring data integrity and correctness. In Ascender Framework DTOs are commonly used as the request body structure and for validation in API endpoints, facilitating clear and reliable data exchange within the system"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Response objects"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Response objects are responsible for returning structured API data. They also utilize Pydantic for validation and serialization into JSON format. In the Ascender Framework, responses are commonly used in services. When they are more complex structured, they can be used in combination with the controller optionals ",(0,r.jsx)(n.code,{children:"Serializer"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"example-of-defining-data-transfer-object-dto",children:"Example of defining Data Transfer Object (DTO)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:"from core.optionals import BaseDTO\n# Will work if you will use pydantic's types, fields and even itself\nfrom pydantic import EmailStr\n\n\nclass UserDTO(BaseDTO):\n    username: str\n    email: EmailStr\n    password: str\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Add the ",(0,r.jsx)(n.code,{children:"UserDTO"})," object into import namespace:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'from .dtos.user import UserDTO\n\n\n__all__ = ["UserDTO"]\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Usage example in the controller in ",(0,r.jsx)(n.code,{children:"endpoints.py"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'...\nfrom .models import UserDTO\n\n\n@Controller()\nclass User:\n    @Post("register")\n    async def create_user(self, data: UserDTO):\n        ...\n'})}),"\n",(0,r.jsx)(n.h4,{id:"example-of-defining-response-object",children:"Example of defining Response object"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:"from core.optionals import BaseResponse\n# Will work if you will use pydantic's types, fields and even itself\nfrom pydantic import EmailStr\n\n\nclass UserResponse(BaseResponse):\n    id: int\n    username: str\n    email: EmailStr\n"})}),"\n",(0,r.jsxs)(n.p,{children:["We removed ",(0,r.jsx)(n.code,{children:"password"})," and added ",(0,r.jsx)(n.code,{children:"id"})," into response model, because it will be returned as HTTP response after finishing handling API request."]}),"\n",(0,r.jsxs)(n.p,{children:["Add the ",(0,r.jsx)(n.code,{children:"UserResponse"})," object into import namespace:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'from .dtos.user import UserResponse\n\n\n__all__ = ["UserResponse"]\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Usage example in the controller in ",(0,r.jsx)(n.code,{children:"endpoints.py"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'...\nfrom .models import UserDTO, UserResponse\n\n\n@Controller()\nclass User:\n    @Post("register")\n    async def create_user(self, data: UserDTO):\n        return UserResponse(id=1, **data.model_dump())\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"serializers-for-complex-objects",children:"Serializers (For complex objects)"}),"\n",(0,r.jsx)(n.p,{children:"The usage of Serializers in the Ascender Framework is not very common. They are employed when Response objects or DTO objects are more complex and have nested values and nuances. In such cases, using Serializers is the appropriate approach to handle the complexity and ensure proper data formatting and validation."}),"\n",(0,r.jsx)(n.p,{children:"There are several types of Serializers in the Ascender Framework:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Base Serializer"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The Base Serializer (",(0,r.jsx)(n.code,{children:"BaseSerializer"}),") accepts any uninitialized type of Model (DTO or Response) and a full database entity object as parameters. It outputs a serialized Model (DTO or Response)."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Specialized Serializer"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"This type of Serializer needs to be defined and configured by the developer. It inherits from the Base Serializer class and handles more complex objects. Specialized Serializers are tailored for specific Models (DTO or Response), which should be complex and large."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Queryset Serializer"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"This serializer works with either the Base Serializer or Specialized Serializer. It serializes lists of entities or large queryset iterables. A useful example of this type of serializer is for a Pagination Response."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Each type of Serializer serves a unique purpose, ensuring flexibility and efficiency in handling different levels of data complexity within the framework."}),"\n",(0,r.jsx)(n.h4,{id:"example-of-specialized-serializer",children:"Example of Specialized Serializer"}),"\n",(0,r.jsxs)(n.p,{children:["Earlier we defined a few Models: ",(0,r.jsx)(n.code,{children:"UserDTO"})," and ",(0,r.jsx)(n.code,{children:"UserResponse"}),", now let's make a specific serializer for ",(0,r.jsx)(n.code,{children:"UserResponse"})," using Base Serializer."]}),"\n",(0,r.jsx)(n.p,{children:"Here's the structure of Specialized Serializer:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\u2514\u2500\u2500 controllers\n    \u2514\u2500\u2500 <controller-name>\n        \u251c\u2500\u2500 endpoints.py\n        \u251c\u2500\u2500 service.py\n        \u251c\u2500\u2500 repository.py\n        \u251c\u2500\u2500 models # The optionals that we defined earlier\n        \u2514\u2500\u2500 serializers # One of optionals is Serializers\n            \u251c\u2500\u2500 __init__.py # For namespacing\n            \u2514\u2500\u2500 user.py\n"})}),"\n",(0,r.jsx)(n.p,{children:"The example of basic Specialized Serializer:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'from core.optionals import Serializer\nfrom ..models import UserResponse, UserDTO\n\n\nclass UserSerializer(Serializer):\n    def __init__(self, entity: UserDTO, id: int):\n        self.pd_model = UserResponse\n        self.entity = entity\n        self.values = {"id": id}\n\n    def serialize(self):\n        return self.entity\n'})}),"\n",(0,r.jsx)(n.p,{children:"Very good! We successfully created basic Specialized Serializer, now we have to use it:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'...\nfrom .models import UserDTO, UserResponse\nfrom .serializers import UserSerializer\n\n\n@Controller()\nclass User:\n    @Post("register")\n    async def create_user(self, data: UserDTO):\n        return UserSerializer(data, id=1)() # We have to call __call__ method of the serializer class to build the serialized model\n'})}),"\n",(0,r.jsxs)(n.admonition,{type:"tip",children:[(0,r.jsx)(n.p,{children:"We recommend using Serializers wisely to keep your code well-organized."}),(0,r.jsxs)(n.p,{children:["If there is no need to use Serializers, you can simply use Pydantic's ",(0,r.jsx)(n.code,{children:"model_validate"})," method in Response objects or DTO objects."]})]})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>a});var r=s(6540);const i={},o=r.createContext(i);function l(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);